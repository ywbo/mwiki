## 乐观锁 vs 悲观锁

> 乐观锁 与悲观锁市一种广义上的概念。体现了看待线程同步的不同角度。在Java和数据库中都有次此概念对应的实际应用。

### 1. `悲观锁`概念

​		对于同一个数据的并发操作，悲观锁认为自己在使用数据的时候一定有别的线程来修改数据，因此在获取数据的时候会先加锁，确保数据不会被别的线程修改。Java中，`Synchronized`关键字和`Lock`的实现类都是悲观锁。

### 2. `乐观锁`概念

​		乐观锁认为自己在使用数据时，不会有别的线程修改数据，所以不会添加锁，只是在更新数据的时候去判断之前有没有别的线程更新了这个数据。如果这个数据没有被更新，当前线程将自己修改的数据成功写入。如果数据被其他线程更新，则根据不同的实现方式执行不同的操作（例如报错或者自动重试）。

乐观锁在Java中是通过使用无锁编程来实现，最常采用的是`CAS算法`，Java原子类的递增操作就是通过`CAS自旋`实现的。